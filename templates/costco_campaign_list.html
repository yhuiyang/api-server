{% extends "base.html" %}

{% block mediaCSS %}
<style type="text/css">
body {
    padding-top: 60px;
}

#form-background {
    background-color: #cccccc;
    padding: 30px;
    -moz-border-radius: 15px;
    border-radius: 15px;
}
</style>
{% endblock mediaCSS %}

{% block content %}
<div id="myForm"  class="collapse">
    <form class="form-horizontal" id="form-background" action="/costco/campaigns" method="post">
        <fieldset>
            <legend>Create New Campaign</legend>
            <div class="row-fluid">
                <div class="control-group span6">
                    <label class="control-label">Start date</label>
                    <div class="controls">
                        <input type="date" name="date-start" required>
                    </div>
                </div>
                <div class="control-group span6">
                    <label class="control-label">End date</label>
                    <div class="controls">
                        <input type="date" name="date-end" required>
                    </div>
                </div>
            </div>
            <div class="row-fluid">
                <div class="control-group span12">
                    <label class="control-label">Type</label>
                    <div class="controls">
                        <select name="type" required>
                            <option>coupon</option>
                            <option>exhibition</option>
                            <option>preview</option>
                            <option>announcement</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="row-fluid">
                <button class="input btn btn-primary offset4 span4" value="submit">Create New Campaign</button>
            </div>
        </fieldset>
    </form>
</div>

<h1>Campaign List
    <button type="button" id="showHideBtn" class="btn btn-info pull-right" data-toggle="collapse" data-target="#myForm">
        <i id="btnIcon" class="icon-chevron-down icon-white"></i><span id="btnText">Show form</span>
    </button>
</h1>

{% if campaigns %}
<table class="table table-striped table-hover">
    <thead>
        <tr>
            <th>#</th>
            <th>Version</th>
            <th>Type</th>
            <th>Start Date</th>
            <th>End Date</th>
        </tr>
    </thead>
    <tbody>
        {% for campaign in campaigns %}
        <tr onclick="self.location='/costco/campaign/{{ campaign.ver }}'">
            <td>{{ loop.index }}<i class="icon-{% if campaign.published and not campaign.modified %}play{% elif campaign.published and campaign.modified %}flag{% else %}pause{% endif %}"></i></td>
            <td>{{ campaign.ver }}</td>
            <td>{{ campaign.type }}</td>
            <td>{{ campaign.start }}</td>
            <td>{{ campaign.end }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endif %}
{% endblock content %}

{% block mediaJS %}
<script type="text/javascript">
$('#myForm').on('shown', function() {
    $('#btnText').text('Hide form');
    $('#btnIcon').removeClass('icon-chevron-down').addClass('icon-chevron-up')
})
$('#myForm').on('hidden', function() {
    $('#btnText').text('Show form');
    $('#btnIcon').removeClass('icon-chevron-up').addClass('icon-chevron-down')
})
</script>
{% endblock %}
